{"version":3,"sources":["generator/src/github_util.js"],"names":[],"mappings":"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","file":"generator/src/github_util.js","sourcesContent":["/// <reference path=\"../../typings/node/node.d.ts\" />\n/// <reference path=\"../../typings/lodash/lodash.d.ts\" />\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, Promise, generator) {\n    return new Promise(function (resolve, reject) {\n        generator = generator.call(thisArg, _arguments);\n        function cast(value) { return value instanceof Promise && value.constructor === Promise ? value : new Promise(function (resolve) { resolve(value); }); }\n        function onfulfill(value) { try { step(\"next\", value); } catch (e) { reject(e); } }\n        function onreject(value) { try { step(\"throw\", value); } catch (e) { reject(e); } }\n        function step(verb, value) {\n            var result = generator[verb](value);\n            result.done ? resolve(result.value) : cast(result.value).then(onfulfill, onreject);\n        }\n        step(\"next\", void 0);\n    });\n};\nimport { GithubUser, Repository, LanguageInformation, GithubEvent } from \"./github_model\";\nimport { deserializeAs, Deserializable } from \"./serialize\";\nlet axios = require('axios');\nimport * as _ from \"lodash\";\nexport class GithubError extends Deserializable {\n}\n__decorate([\n    deserializeAs(\"name\")\n], GithubError.prototype, \"name\", void 0);\n__decorate([\n    deserializeAs(\"message\")\n], GithubError.prototype, \"message\", void 0);\n__decorate([\n    deserializeAs(\"statusCode\")\n], GithubError.prototype, \"statusCode\", void 0);\n__decorate([\n    deserializeAs(\"headers\")\n], GithubError.prototype, \"headers\", void 0);\n__decorate([\n    deserializeAs(\"body\")\n], GithubError.prototype, \"body\", void 0);\nexport class GithubResponse {\n    constructor(headers, body) {\n        this.headers = headers;\n        this.body = body;\n    }\n    /**\n     * return null if failed to parse github pagination response\n     */\n    static parseLastLinkCount(link) {\n        if (typeof link === \"undefined\" ||\n            typeof link === null ||\n            typeof link !== \"string\")\n            return null;\n        if (link === \"rel=\\\"last\\\"\")\n            return null;\n        let lastLinkCount = null;\n        try {\n            let uriAndRels = link.split(\",\");\n            for (let i = 0; i < uriAndRels.length; i++) {\n                let splited = uriAndRels[i].split(\";\");\n                if (splited.length < 2)\n                    break; /** `rel= \"last\"` */\n                let rel = splited[1].trim();\n                if (rel === \"rel=\\\"last\\\"\") {\n                    let stringified = splited[0].split(\"&page=\")[1].trim();\n                    lastLinkCount = parseInt(stringified, 10);\n                    if (isNaN(lastLinkCount))\n                        lastLinkCount = null;\n                    break;\n                }\n            }\n        }\n        catch (err) {\n            return null;\n        }\n        return lastLinkCount;\n    }\n}\nexport class GithubUtil {\n    static getGithubResponse(token, uri) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let r = new Promise((resolve, reject) => {\n                if (_.includes(uri, \"?\"))\n                    uri = `https://api.github.com${uri}&access_token=${token}`;\n                else\n                    uri = `https://api.github.com${uri}?access_token=${token}`;\n                axios.get(uri)\n                    .then(response => {\n                    return resolve(new GithubResponse(response.headers, response.data));\n                })\n                    .catch(response => {\n                    if (response instanceof Error)\n                        return reject(response);\n                    response.data.statusCode = response.status;\n                    return reject(response.data);\n                });\n            });\n            return r;\n        });\n    }\n    /** collect all API using pagination */\n    static getGithubResponses(token, uri) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let responses = new Array();\n            let r = yield GithubUtil.getGithubResponse(token, uri);\n            responses.push(r);\n            let lastCount = GithubResponse.parseLastLinkCount(r.headers.link);\n            if (lastCount === null)\n                return responses;\n            let ps = new Array();\n            for (let i = 2; i <= lastCount; i++) {\n                ps.push(GithubUtil.getGithubResponse(token, `${uri}?page=${i}`));\n            }\n            let rs = yield Promise.all(ps);\n            let merged = responses.concat(rs);\n            return merged;\n        });\n    }\n    static getGithubResponseBody(token, uri) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let r = yield GithubUtil.getGithubResponse(token, uri);\n            return r.body;\n        });\n    }\n    /**\n     * 1. retrieve page header\n     * 2. get all pages\n     * 3. return flattened\n     */\n    static getGithubResponsesBody(token, uri) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let rs = yield GithubUtil.getGithubResponses(token, uri);\n            let bodies = rs.map(r => r.body); /* each body is an array */\n            let flattened = bodies.reduce((acc, body) => {\n                if (Array.isArray(body) && body.length > 0)\n                    return acc.concat(body);\n                else\n                    return acc;\n            });\n            return flattened;\n        });\n    }\n    static getGithubUser(token, user) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let raw = yield GithubUtil.getGithubResponseBody(token, `/users/${user}`);\n            return GithubUser.deserialize(GithubUser, raw);\n        });\n    }\n    static getUserLanguages(token, user, ignoredRepos) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let repos = yield GithubUtil.getUserRepositories(token, user);\n            let repoNames = repos\n                .map(r => r.name)\n                .filter(name => !_.contains(ignoredRepos, name)); /** filter out ignored repos */\n            if (repos.length === 0)\n                return new Array();\n            let ps = repoNames.map(name => {\n                return GithubUtil.getGithubResponseBody(token, `/repos/${user}/${name}/languages`)\n                    .then(langObject => {\n                    return {\n                        owner: user,\n                        repo_name: name,\n                        url: `http://github.com/${user}/${name}`,\n                        langObject: langObject\n                    };\n                });\n            });\n            let rawLangInfos = yield Promise.all(ps);\n            if (_.isEmpty(rawLangInfos))\n                return new Array();\n            let langInfos = rawLangInfos.map(rawLangInfo => {\n                return LanguageInformation.deserialize(LanguageInformation, rawLangInfo);\n            });\n            // TODO try-catch\n            // TODO filter empty array in languages\n            return langInfos;\n        });\n    }\n    static getUserRepositories(token, user) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let raw = yield GithubUtil.getGithubResponsesBody(token, `/users/${user}/repos`);\n            let repos = Repository.deserializeArray(Repository, raw);\n            return repos;\n        });\n    }\n    static getUserActivities(token, user) {\n        return __awaiter(this, void 0, Promise, function* () {\n            let raw = yield GithubUtil.getGithubResponsesBody(token, `/users/${user}/events/public`);\n            let events = GithubEvent.deserializeGithubEvent(raw);\n            return events.filter(e => e !== null);\n        });\n    }\n}\n"],"sourceRoot":"/source/"}