{"version":3,"sources":["generator/src/profile.js"],"names":[],"mappings":"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","file":"generator/src/profile.js","sourcesContent":["/// <reference path=\"../../typings/node/node.d.ts\" />\n/// <reference path=\"../../typings/lodash/lodash.d.ts\" />\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, Promise, generator) {\n    return new Promise(function (resolve, reject) {\n        generator = generator.call(thisArg, _arguments);\n        function cast(value) { return value instanceof Promise && value.constructor === Promise ? value : new Promise(function (resolve) { resolve(value); }); }\n        function onfulfill(value) { try { step(\"next\", value); } catch (e) { reject(e); } }\n        function onreject(value) { try { step(\"throw\", value); } catch (e) { reject(e); } }\n        function step(verb, value) {\n            var result = generator[verb](value);\n            result.done ? resolve(result.value) : cast(result.value).then(onfulfill, onreject);\n        }\n        step(\"next\", void 0);\n    });\n};\nimport * as _ from \"lodash\";\nimport { Util, Log } from \"./util\";\nimport { deserialize, deserializeAs, Deserializable } from \"./serialize\";\nimport { GithubUtil } from \"./github_util\";\nimport { GithubUser, Repository, LanguageInformation, RepositorySummary, GithubEvent } from \"./github_model\";\nexport class MetaField extends Deserializable {\n    constructor(...args) {\n        super(...args);\n        this.ignored_repositories = new Array();\n        /** since cerialize overwrite values even if it is `null`, we need to use `OnDeserialize` */\n        // TODO: create PR (preventing from overwriting field to `null`)\n        this.schema_version = MetaField.PROFILE_SCHEMA_VERSION;\n        this.schema_created_at = MetaField.CURRENT_DATE;\n        this.schema_collected_ats = new Array(MetaField.CURRENT_DATE);\n    }\n    static OnDeserialized(instance, json) {\n        let profSchemaVersion = json.schema_version;\n        if (null !== profSchemaVersion && profSchemaVersion !== MetaField.PROFILE_SCHEMA_VERSION) {\n            Util.reportMessageAndExit(`Invalid \\`_$meta.schema_version\\`: ${profSchemaVersion}`);\n        }\n        if (_.isEmpty(profSchemaVersion))\n            profSchemaVersion = MetaField.PROFILE_SCHEMA_VERSION;\n        instance.schema_version = profSchemaVersion;\n        let created_at = json.schema_created_at;\n        if (_.isEmpty(created_at))\n            created_at = MetaField.CURRENT_DATE;\n        instance.schema_created_at = created_at;\n        let collected_ats = json.schema_collected_ats;\n        if (_.isEmpty(collected_ats))\n            collected_ats = new Array(MetaField.CURRENT_DATE);\n        instance.schema_collected_ats = collected_ats;\n    }\n}\nMetaField.PROFILE_SCHEMA_VERSION = 1;\nMetaField.CURRENT_DATE = new Date().toISOString();\n__decorate([\n    deserialize\n], MetaField.prototype, \"agent\", void 0);\n__decorate([\n    deserialize\n], MetaField.prototype, \"github_user\", void 0);\n__decorate([\n    deserialize\n], MetaField.prototype, \"github_repository\", void 0);\n__decorate([\n    deserialize\n], MetaField.prototype, \"ignored_repositories\", void 0);\nexport class Profile extends Deserializable {\n    constructor(...args) {\n        super(...args);\n        this._$meta = new MetaField();\n        /**\n         * since GithubEvent is the base class of all Github*Event, (e.g GithubPushEvent)\n         * we need to custom deserializer instead of @deserializeAs\n         * to avoid losing information while deserializing\n         */\n        this.activities = new Array();\n    }\n    static OnDeserialized(instance, json) {\n        if (_.isEmpty(json))\n            return;\n        if (_.isEmpty(json.activities))\n            return;\n        let activities = GithubEvent.deserializeGithubEvent(json.activities);\n        instance.activities = activities;\n    }\n    static updateMeta(currentProfile, prevMeta) {\n        let currentMeta = currentProfile._$meta;\n        let meta = Util.copyObject(prevMeta);\n        /** 1. update schema_collected_ats */\n        meta.schema_collected_ats.push(MetaField.CURRENT_DATE);\n        /** 2. update ignored_repositories */\n        meta.ignored_repositories = _.union(currentMeta.ignored_repositories, prevMeta.ignored_repositories);\n        currentProfile._$meta = meta;\n        return currentProfile;\n    }\n    updateMeta(prevMeta) {\n        return Profile.updateMeta(this, prevMeta);\n    }\n}\n__decorate([\n    deserializeAs(MetaField)\n], Profile.prototype, \"_$meta\", void 0);\n__decorate([\n    deserializeAs(GithubUser)\n], Profile.prototype, \"user\", void 0);\n__decorate([\n    deserializeAs(LanguageInformation)\n], Profile.prototype, \"languages\", void 0);\n__decorate([\n    deserializeAs(Repository)\n], Profile.prototype, \"repositories\", void 0);\nexport function printProfile(user, langInfos, repos, prevProfile, currentProfile, ignoredRepos) {\n    /** user */\n    Log.blue(\"\\n[USER]\", \"\");\n    Log.greenReverse(\"Github User: \", user.login);\n    Log.greenReverse(\"Created At:  \", user.created_at);\n    Log.greenReverse(\"Following:   \", user.following);\n    Log.greenReverse(\"Follower :   \", user.followers);\n    Log.greenReverse(\"Public Repo: \", user.public_repos);\n    Log.greenReverse(\"Public Gist: \", user.public_gists);\n    /** langauge */\n    Log.blue(\"\\n[LANGUAGE]\", \"\");\n    if (!_.isEmpty(langInfos)) {\n        let langSet = langInfos.reduce((acc, langInfo) => {\n            if (_.isEmpty(langInfo.languages) || langInfo.languages.length === 0)\n                return acc;\n            langInfo.languages.map(lang => lang.name).forEach(name => {\n                acc.add(name);\n            });\n            return acc;\n        }, new Set());\n        Log.magentaReverse(\"Language Count: \", langSet.size);\n        Log.magentaReverse(\"Supported Languages: \", Array.from(langSet).join(\", \"));\n        // TODO converts to ir, il options (ignoreLanguage, ignoreRepository)\n        Log.magentaReverse(\"Ignored Repositories: \", ignoredRepos);\n    }\n    /** repository */\n    Log.blue(\"\\n[REPOSITORY]\", \"\");\n    // TODO refactor, print ignored repos\n    // TODO featured reos\n    if (!_.isEmpty(repos)) {\n        let repoSummary = new RepositorySummary();\n        repos.reduce((sum, repo) => {\n            sum.repository_names.push(repo.name);\n            sum.repository_count += 1;\n            sum.watchers_count += repo.watchers_count;\n            sum.stargazers_count += repo.stargazers_count;\n            sum.forks_count += repo.forks_count;\n            return sum;\n        }, repoSummary);\n        Log.magentaReverse(\"Repository Count: \", repoSummary.repository_count);\n    }\n    /** activity */\n    Log.blue(\"\\n[ACTIVITY]\", \"\");\n    let prevActs = prevProfile.activities;\n    let prevActIds = new Set(prevActs.map(act => act.event_id));\n    let currentActs = currentProfile.activities;\n    let newActs = currentActs.filter(act => !prevActIds.has(act.event_id));\n    Log.magentaReverse(\"Current Profile Activity: \", currentActs.length);\n    if (prevActs.length !== currentActs.length) {\n        Log.magentaReverse(\"Previous Profile Activity: \", prevActs.length);\n        console.log(\"New Activity Details:\");\n        let eventTypeToCount = {};\n        for (let i = 0; i < newActs.length; i++) {\n            let act = newActs[i];\n            if (!eventTypeToCount.hasOwnProperty(act.type))\n                eventTypeToCount[act.type] = 0;\n            eventTypeToCount[act.type] += 1;\n        }\n        let eventTypes = Object\n            .keys(eventTypeToCount)\n            .filter(type => eventTypeToCount.hasOwnProperty(type));\n        for (let j = 0; j < eventTypes.length; j++) {\n            let type = eventTypes[j];\n            Log.magenta(`  ${type} (${eventTypeToCount[type]})`, \"\");\n        }\n    }\n}\nexport function createProfile(token, prevProf, ignoredRepos) {\n    return __awaiter(this, void 0, Promise, function* () {\n        let user = prevProf._$meta.github_user;\n        let currentProf = new Profile();\n        currentProf._$meta.ignored_repositories = ignoredRepos;\n        let allIgnoredRepos = _.union(ignoredRepos, prevProf._$meta.ignored_repositories);\n        let githubUser = yield GithubUtil.getGithubUser(token, user);\n        let repos = yield GithubUtil.getUserRepositories(token, user);\n        let langs = yield GithubUtil.getUserLanguages(token, user, allIgnoredRepos);\n        let currentActs = yield GithubUtil.getUserActivities(token, user);\n        let uniqActs = GithubEvent.mergeByEventId(prevProf.activities, currentActs);\n        currentProf.activities = uniqActs;\n        currentProf.repositories = repos;\n        currentProf.languages = langs;\n        currentProf.user = githubUser;\n        /** printProfile before updating meta */\n        printProfile(githubUser, langs, repos, prevProf, currentProf, allIgnoredRepos);\n        currentProf.updateMeta(prevProf._$meta);\n        return currentProf;\n    });\n}\n"],"sourceRoot":"/source/"}