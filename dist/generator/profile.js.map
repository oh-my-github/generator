{"version":3,"sources":["generator/src/profile.js"],"names":[],"mappings":"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","file":"generator/src/profile.js","sourcesContent":["/// <reference path=\"../../typings/node/node.d.ts\" />\n/// <reference path=\"../../typings/lodash/lodash.d.ts\" />\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, Promise, generator) {\n    return new Promise(function (resolve, reject) {\n        generator = generator.call(thisArg, _arguments);\n        function cast(value) { return value instanceof Promise && value.constructor === Promise ? value : new Promise(function (resolve) { resolve(value); }); }\n        function onfulfill(value) { try { step(\"next\", value); } catch (e) { reject(e); } }\n        function onreject(value) { try { step(\"throw\", value); } catch (e) { reject(e); } }\n        function step(verb, value) {\n            var result = generator[verb](value);\n            result.done ? resolve(result.value) : cast(result.value).then(onfulfill, onreject);\n        }\n        step(\"next\", void 0);\n    });\n};\nimport * as _ from \"lodash\";\nimport { Util, Log } from \"./util\";\nimport { deserialize, deserializeAs, Deserializable } from \"./serialize\";\nimport { GithubUtil } from \"./github_util\";\nimport { GithubUser, Repository, LanguageInformation, RepositorySummary, GithubEvent } from \"./github_model\";\nexport class MetaField extends Deserializable {\n    constructor(...args) {\n        super(...args);\n        this.ignored_repositories = new Array();\n        /** since cerialize overwrite values even if it is `null`, we need to use `OnDeserialize` */\n        // TODO: create PR (preventing from overwriting field to `null`)\n        this.schema_version = MetaField.PROFILE_SCHEMA_VERSION;\n        this.schema_created_at = MetaField.CURRENT_DATE;\n        this.schema_collected_ats = new Array(MetaField.CURRENT_DATE);\n    }\n    static OnDeserialized(instance, json) {\n        let profSchemaVersion = json.schema_version;\n        if (null !== profSchemaVersion && profSchemaVersion !== MetaField.PROFILE_SCHEMA_VERSION) {\n            Util.reportMessageAndExit(`Invalid \\`_$meta.schema_version\\`: ${profSchemaVersion}`);\n        }\n        if (_.isEmpty(profSchemaVersion))\n            profSchemaVersion = MetaField.PROFILE_SCHEMA_VERSION;\n        instance.schema_version = profSchemaVersion;\n        let created_at = json.schema_created_at;\n        if (_.isEmpty(created_at))\n            created_at = MetaField.CURRENT_DATE;\n        instance.schema_created_at = created_at;\n        let collected_ats = json.schema_collected_ats;\n        if (_.isEmpty(collected_ats))\n            collected_ats = new Array(MetaField.CURRENT_DATE);\n        instance.schema_collected_ats = collected_ats;\n    }\n}\nMetaField.PROFILE_SCHEMA_VERSION = 1;\nMetaField.CURRENT_DATE = new Date().toISOString();\n__decorate([\n    deserialize\n], MetaField.prototype, \"agent\", void 0);\n__decorate([\n    deserialize\n], MetaField.prototype, \"github_user\", void 0);\n__decorate([\n    deserialize\n], MetaField.prototype, \"github_repository\", void 0);\n__decorate([\n    deserialize\n], MetaField.prototype, \"ignored_repositories\", void 0);\nexport class Profile extends Deserializable {\n    constructor(...args) {\n        super(...args);\n        this._$meta = new MetaField();\n        /**\n         * since GithubEvent is the base class of all Github*Event, (e.g GithubPushEvent)\n         * we need to custom deserializer instead of @deserializeAs\n         * to avoid losing information while deserializing\n         */\n        this.activities = new Array();\n    }\n    static OnDeserialized(instance, json) {\n        if (_.isEmpty(json))\n            return;\n        if (_.isEmpty(json.activities))\n            return;\n        let activities = GithubEvent.deserializeGithubEvent(json.activities);\n        instance.activities = activities;\n    }\n    static updateMeta(currentProfile, prevMeta) {\n        let currentMeta = currentProfile._$meta;\n        let meta = Util.copyObject(prevMeta);\n        /** 1. update schema_collected_ats */\n        meta.schema_collected_ats.push(MetaField.CURRENT_DATE);\n        /** 2. update ignored_repositories */\n        meta.ignored_repositories = _.union(currentMeta.ignored_repositories, prevMeta.ignored_repositories);\n        currentProfile._$meta = meta;\n        return currentProfile;\n    }\n    updateMeta(prevMeta) {\n        return Profile.updateMeta(this, prevMeta);\n    }\n}\n__decorate([\n    deserializeAs(MetaField)\n], Profile.prototype, \"_$meta\", void 0);\n__decorate([\n    deserializeAs(GithubUser)\n], Profile.prototype, \"user\", void 0);\n__decorate([\n    deserializeAs(LanguageInformation)\n], Profile.prototype, \"languages\", void 0);\n__decorate([\n    deserializeAs(Repository)\n], Profile.prototype, \"repositories\", void 0);\nexport function printProfile(user, langInfos, repos, prevProfile, currentProfile, ignoredRepos) {\n    function renderTitle(tag) {\n        Log.blue(`\\n  ${tag}`, \"\");\n    }\n    function renderText(tag, message) {\n        Log.magentaReverse(`    ${tag}`, message);\n    }\n    /** user */\n    renderTitle(\"[USER]\");\n    renderText(\"Github User: \", user.login);\n    renderText(\"Created At:  \", user.created_at);\n    renderText(\"Following:   \", user.following);\n    renderText(\"Follower :   \", user.followers);\n    renderText(\"Public Repo: \", user.public_repos);\n    renderText(\"Public Gist: \", user.public_gists);\n    /** langauge */\n    renderTitle(\"[LANGUAGE]\");\n    if (!_.isEmpty(langInfos)) {\n        let langSet = langInfos.reduce((acc, langInfo) => {\n            if (_.isEmpty(langInfo.languages) || langInfo.languages.length === 0)\n                return acc;\n            langInfo.languages.map(lang => lang.name).forEach(name => {\n                acc.add(name);\n            });\n            return acc;\n        }, new Set());\n        renderText(\"Language Count: \", langSet.size);\n        renderText(\"Supported Languages: \", Array.from(langSet).join(\", \"));\n        // TODO converts to ir, il options (ignoreLanguage, ignoreRepository)\n        renderText(\"Ignored Repositories: \", ignoredRepos);\n    }\n    /** repository */\n    renderTitle(\"[REPOSITORY]\");\n    // TODO refactor, print ignored repos\n    // TODO featured reos\n    if (!_.isEmpty(repos)) {\n        let repoSummary = new RepositorySummary();\n        repos.reduce((sum, repo) => {\n            sum.repository_names.push(repo.name);\n            sum.repository_count += 1;\n            sum.watchers_count += repo.watchers_count;\n            sum.stargazers_count += repo.stargazers_count;\n            sum.forks_count += repo.forks_count;\n            return sum;\n        }, repoSummary);\n        renderText(\"Repository Count: \", repoSummary.repository_count);\n    }\n    /** activity */\n    renderTitle(\"[ACTIVITY]\");\n    let prevActs = prevProfile.activities;\n    let prevActIds = new Set(prevActs.map(act => act.event_id));\n    let currentActs = currentProfile.activities;\n    let newActs = currentActs.filter(act => !prevActIds.has(act.event_id));\n    renderText(\"Current Profile Activity: \", currentActs.length);\n    if (prevActs.length !== currentActs.length) {\n        renderText(\"Previous Profile Activity: \", prevActs.length);\n        renderText(\"New Activity Details:\", \"\");\n        let eventTypeToCount = {};\n        for (let i = 0; i < newActs.length; i++) {\n            let act = newActs[i];\n            if (!eventTypeToCount.hasOwnProperty(act.type))\n                eventTypeToCount[act.type] = 0;\n            eventTypeToCount[act.type] += 1;\n        }\n        let eventTypes = Object\n            .keys(eventTypeToCount)\n            .filter(type => eventTypeToCount.hasOwnProperty(type));\n        for (let j = 0; j < eventTypes.length; j++) {\n            let type = eventTypes[j];\n            renderText(`  ${type}: `, `${eventTypeToCount[type]}`);\n        }\n    }\n}\nexport function createProfile(token, prevProf, ignoredRepos) {\n    return __awaiter(this, void 0, Promise, function* () {\n        let user = prevProf._$meta.github_user;\n        let currentProf = new Profile();\n        currentProf._$meta.ignored_repositories = ignoredRepos;\n        let allIgnoredRepos = _.union(ignoredRepos, prevProf._$meta.ignored_repositories);\n        let githubUser = yield GithubUtil.getGithubUser(token, user);\n        let repos = yield GithubUtil.getUserRepositories(token, user);\n        let langs = yield GithubUtil.getUserLanguages(token, user, allIgnoredRepos);\n        let currentActs = yield GithubUtil.getUserActivities(token, user);\n        let uniqActs = GithubEvent.mergeByEventId(prevProf.activities, currentActs);\n        currentProf.activities = uniqActs;\n        currentProf.repositories = repos;\n        currentProf.languages = langs;\n        currentProf.user = githubUser;\n        /** printProfile before updating meta */\n        printProfile(githubUser, langs, repos, prevProf, currentProf, allIgnoredRepos);\n        currentProf.updateMeta(prevProf._$meta);\n        return currentProf;\n    });\n}\n"],"sourceRoot":"/source/"}